"use strict";var jv;(function(jv){var ajaxView=function(){function ajaxView(t,e,a,o,i){void 0===t&&(t="loading"),void 0===e&&(e=!0),void 0===a&&(a=500),void 0===o&&(o=500),void 0===i&&(i="http://static.xct.cn/sucai/loading.gif"),this.IsShowLoading=!1,this.fadeInTime=500,this.fadeOutTime=500,this.countRequest=0,this.countDone=0,e&&$("#"+t).length<1&&this.createLoading(t,i),this.pageLoadingBoxID=t,ajaxView.prototype.fadeInTime=a,ajaxView.prototype.fadeOutTime=o,ajaxView.prototype.pageLoadingBox=$("#"+this.pageLoadingBoxID),ajaxView.prototype.countDone=ajaxView.prototype.countRequest=0,""===this.pageLoadingBoxID||$("#"+this.pageLoadingBoxID).length<1?ajaxView.prototype.IsShowLoading=!1:ajaxView.prototype.IsShowLoading=!0,this.listenWiget()}return ajaxView.prototype.createLoading=function(t,e){var a='<div id="'+t+'" style="display:none;z-index:39;background-color:rgba(100, 100, 100, 0.65);position:absolute;height:100%;width: 100%; text-align: center;"><img src="'+e+'" style="margin-top: '+document.body.clientHeight/3+'px;"></div>';$("body").prepend(a)},ajaxView.prototype.addHtml=function(t,e,a){var o=a;switch(null!=this.dataFormater&&(o=this.dataFormater(a)),t){case"replace":e.html(o);break;case"append":e.append(o);break;case"prepend":e.prepend(o);break;default:e.html(o)}},ajaxView.prototype.listenDone=function(data,formater,add,obj,callBack){null!=formater&&""!=formater&&(data=eval(formater)),ajaxView.prototype.addHtml(add,obj,data),null!=callBack&&""!=callBack&&eval(callBack),ajaxView.prototype.fadeOut()},ajaxView.prototype.doDone=function(t,e,a,o){void 0===e&&(e=""),void 0===a&&(a="replace"),""!=e&&$(e).length>0&&this.addHtml(a,$(e),t),null!=o&&null!=o&&o.call(this,t),ajaxView.prototype.fadeOut()},ajaxView.prototype.fadeOut=function(){ajaxView.prototype.countDone++,ajaxView.prototype.IsShowLoading&&ajaxView.prototype.countDone>=ajaxView.prototype.countRequest&&(ajaxView.prototype.pageLoadingBox.fadeOut(ajaxView.prototype.fadeOutTime),ajaxView.prototype.countDone=ajaxView.prototype.countRequest=0)},ajaxView.prototype.fadeIn=function(){ajaxView.prototype.countRequest++,ajaxView.prototype.IsShowLoading&&ajaxView.prototype.countDone<ajaxView.prototype.countRequest&&ajaxView.prototype.pageLoadingBox.fadeIn(ajaxView.prototype.fadeInTime)},ajaxView.prototype.setFormater=function(t){ajaxView.prototype.dataFormater=t},ajaxView.prototype.get=function(t,e,a,o){void 0===a&&(a=""),void 0===o&&(o="replace"),""!==t&&(ajaxView.prototype.fadeIn(),$.get(t).done(function(t){ajaxView.prototype.doDone(t,a,o,e)}))},ajaxView.prototype.post=function(t,e,a,o){void 0===a&&(a=""),void 0===o&&(o="replace"),""!==t&&(ajaxView.prototype.fadeIn(),$.post(t).done(function(t){ajaxView.prototype.doDone(t,a,o,e)}))},ajaxView.prototype.ajax=function(t,e,a,o){void 0===a&&(a=""),void 0===o&&(o="replace"),ajaxView.prototype.fadeIn(),$.ajax(t).done(function(t){ajaxView.prototype.doDone(t,a,o,e)})},ajaxView.prototype.reqTmpl=function(t,e,a,o,i,p){var n;void 0===a&&(a=""),void 0===i&&(i="replace"),void 0===p&&(p="get"),"string"==typeof t?n={type:p,url:t,dataType:"json"}:(n=t,n.type=p),ajaxView.prototype.fadeIn(),$.ajax(n).done(function(t){var p;e.startsWith("#")?"text/x-jquery-tmpl"===$(e).attr("type")&&(p=$(e).tmpl(t)):p=$.tmpl(e,t),ajaxView.prototype.doDone(p,a,i,o)})},ajaxView.prototype.listenWiget=function(){$("[mvc_partial_action]").each(function(){var t=$(this).attr("mvc_partial_action"),e=$(this),a=$(this).attr("mvc_verb"),o=$(this).attr("mvc_add_html"),i=$(this).attr("mvc_callback"),p=$(this).attr("mvc_data_formater");""!=t&&(ajaxView.prototype.fadeIn(),"get"===a&&$.get(t).done(function(t){ajaxView.prototype.listenDone(t,p,o,e,i)}),"post"===a&&$.post(t).done(function(t){ajaxView.prototype.listenDone(t,p,o,e,i)}))})},ajaxView}();jv.ajaxView=ajaxView})(jv||(jv={}));