<html>

<head>
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="http://static.jonvie.com/js_public/jquerycomm/jquery.tmpl.min.js"></script>
    <script src="script/jv.ajaxView.js"></script>


    <script type="text/x-jquery-tmpl" id="tipsTemp">
            <div class="ui-widget" id="tip-${OrderUnid}">
                <div class="ui-state-highlight ui-corner-all" style="padding: 0 .7em;">
                    <div>
                        <strong> ${OrderUnid} ：</strong> ${UserName} - ${OrderDate}
                    </div>
                </div>
            </div>
        </script>
</head>

<body>
    <div><a href="javascript:test();">加载测试</a></div>
    <div id="main_data" mvc_partial_action="http://localhost:43274/Test/dzuser.cshtml?user=jonvie" mvc_verb="get"
        mvc_callback="alert('ok')" mvc_data_formater="f(data)"></div>
</body>
<script>
var jonvieAjax = new jv.ajaxView("loadingBox");

    function test()
    {
        jonvieAjax.setFormater(function (data) {
            return f(data);
        });

        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");

        jonvieAjax.ajax({
            type:"get",
            dataType:"json",
            url:"http://localhost:43274/Test/dzuser.cshtml?user=zhangsn"
        },function(d){console.log("22222222")}, "#main_data","");

        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");
        jonvieAjax.get("http://localhost:43274/Test/dzuser.cshtml?user=zhangsn",function(d){console.log("111111111111111")}, "#main_data","");



    }

    function f(data) {

        var obj=data;

        if(typeof(data)==="string")
         obj = JSON.parse(data);

        return $("#tipsTemp").tmpl(obj);
    }
</script>

</html>